$schema: "https://json-schema.org/draft/2020-12/schema"
$id: "https://frank1o3.github.io/smithpy/schemas/policy.schema.yml"
title: Mod Policy Schema
description: Schema for policy.json defining mod conflicts and sub-mod relationships
type: object

additionalProperties:
  $ref: "#/$defs/modRule"

$defs:
  modId:
    type: string
    pattern: "^[a-z0-9]+(-[a-z0-9]+)*$"
    description: Canonical mod identifier (kebab-case)

  modRule:
    type: object
    required:
      - conflicts
      - sub_mods

    properties:
      conflicts:
        type: array
        items:
          $ref: "#/$defs/modId"
        uniqueItems: true

      sub_mods:
        type: array
        items:
          $ref: "#/$defs/modId"
        uniqueItems: true

    additionalProperties: false
